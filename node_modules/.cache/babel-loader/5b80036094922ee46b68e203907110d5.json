{"ast":null,"code":"import _createForOfIteratorHelper from \"/home/arthur/yfac-2/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _defineProperty from \"/home/arthur/yfac-2/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutProperties from \"/home/arthur/yfac-2/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nvar _excluded = [\"initialFocus\", \"containers\", \"features\"];\nimport i, { useEffect as k, useRef as m } from \"react\";\nimport { forwardRefWithAs as A, render as h } from \"../../utils/render.js\";\nimport { useServerHandoffComplete as y } from \"../../hooks/use-server-handoff-complete.js\";\nimport { useSyncRefs as S } from \"../../hooks/use-sync-refs.js\";\nimport { Features as M, Hidden as L } from \"../../internal/hidden.js\";\nimport { focusElement as a, focusIn as b, Focus as E, FocusResult as g } from \"../../utils/focus-management.js\";\nimport { match as B } from \"../../utils/match.js\";\nimport { useEvent as I } from \"../../hooks/use-event.js\";\nimport { useTabDirection as P, Direction as d } from \"../../hooks/use-tab-direction.js\";\nimport { useIsMounted as _ } from \"../../hooks/use-is-mounted.js\";\nimport { useOwnerDocument as U } from \"../../hooks/use-owner.js\";\nimport { useEventListener as H } from \"../../hooks/use-event-listener.js\";\nimport { microTask as C } from \"../../utils/micro-task.js\";\nimport { useWatch as R } from \"../../hooks/use-watch.js\";\nvar N = \"div\";\n\nvar F = function (r) {\n  return r[r.None = 1] = \"None\", r[r.InitialFocus = 2] = \"InitialFocus\", r[r.TabLock = 4] = \"TabLock\", r[r.FocusLock = 8] = \"FocusLock\", r[r.RestoreFocus = 16] = \"RestoreFocus\", r[r.All = 30] = \"All\", r;\n}(F || {});\n\nvar fe = Object.assign(A(function (n, e) {\n  var l = m(null),\n      u = S(l, e),\n      f = n.initialFocus,\n      r = n.containers,\n      _n$features = n.features,\n      o = _n$features === void 0 ? 30 : _n$features,\n      c = _objectWithoutProperties(n, _excluded);\n\n  y() || (o = 1);\n  var s = U(l);\n  V({\n    ownerDocument: s\n  }, Boolean(o & 16));\n  var O = x({\n    ownerDocument: s,\n    container: l,\n    initialFocus: f\n  }, Boolean(o & 2));\n  G({\n    ownerDocument: s,\n    container: l,\n    containers: r,\n    previousActiveElement: O\n  }, Boolean(o & 8));\n  var v = P(),\n      p = I(function () {\n    var _B;\n\n    var T = l.current;\n    !T || B(v.current, (_B = {}, _defineProperty(_B, d.Forwards, function () {\n      return b(T, E.First);\n    }), _defineProperty(_B, d.Backwards, function () {\n      return b(T, E.Last);\n    }), _B));\n  }),\n      j = {\n    ref: u\n  };\n  return i.createElement(i.Fragment, null, Boolean(o & 4) && i.createElement(L, {\n    as: \"button\",\n    type: \"button\",\n    onFocus: p,\n    features: M.Focusable\n  }), h({\n    ourProps: j,\n    theirProps: c,\n    defaultTag: N,\n    name: \"FocusTrap\"\n  }), Boolean(o & 4) && i.createElement(L, {\n    as: \"button\",\n    type: \"button\",\n    onFocus: p,\n    features: M.Focusable\n  }));\n}), {\n  features: F\n});\n\nfunction V(_ref, n) {\n  var t = _ref.ownerDocument;\n  var e = m(null);\n  H(t == null ? void 0 : t.defaultView, \"focusout\", function (u) {\n    !n || e.current || (e.current = u.target);\n  }, !0), R(function () {\n    n || ((t == null ? void 0 : t.activeElement) === (t == null ? void 0 : t.body) && a(e.current), e.current = null);\n  }, [n]);\n  var l = m(!1);\n  k(function () {\n    return l.current = !1, function () {\n      l.current = !0, C(function () {\n        !l.current || (a(e.current), e.current = null);\n      });\n    };\n  }, []);\n}\n\nfunction x(_ref2, l) {\n  var t = _ref2.ownerDocument,\n      n = _ref2.container,\n      e = _ref2.initialFocus;\n  var u = m(null);\n  return R(function () {\n    if (!l) return;\n    var f = n.current;\n    if (!f) return;\n    var r = t == null ? void 0 : t.activeElement;\n\n    if (e != null && e.current) {\n      if ((e == null ? void 0 : e.current) === r) {\n        u.current = r;\n        return;\n      }\n    } else if (f.contains(r)) {\n      u.current = r;\n      return;\n    }\n\n    e != null && e.current ? a(e.current) : b(f, E.First) === g.Error && console.warn(\"There are no focusable elements inside the <FocusTrap />\"), u.current = t == null ? void 0 : t.activeElement;\n  }, [l]), u;\n}\n\nfunction G(_ref3, u) {\n  var t = _ref3.ownerDocument,\n      n = _ref3.container,\n      e = _ref3.containers,\n      l = _ref3.previousActiveElement;\n\n  var f = _();\n\n  H(t == null ? void 0 : t.defaultView, \"focus\", function (r) {\n    if (!u || !f.current) return;\n    var o = new Set(e == null ? void 0 : e.current);\n    o.add(n);\n    var c = l.current;\n    if (!c) return;\n    var s = r.target;\n    s && s instanceof HTMLElement ? W(o, s) ? (l.current = s, a(s)) : (r.preventDefault(), r.stopPropagation(), a(c)) : a(l.current);\n  }, !0);\n}\n\nfunction W(t, n) {\n  var e;\n\n  var _iterator = _createForOfIteratorHelper(t),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var l = _step.value;\n      if ((e = l.current) != null && e.contains(n)) return !0;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return !1;\n}\n\nexport { fe as FocusTrap };","map":null,"metadata":{},"sourceType":"module"}